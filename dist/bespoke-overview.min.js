/*! bespoke-overview v1.0.0 Â© 2015 Dan Allen, MIT License */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self);var o=t;o=o.bespoke||(o.bespoke={}),o=o.plugins||(o.plugins={}),o.overview=e()}}(function(){return function e(t,o,n){function i(s,l){if(!o[s]){if(!t[s]){var a="function"==typeof require&&require;if(!l&&a)return a(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+s+"'")}var v=o[s]={exports:{}};t[s][0].call(v.exports,function(e){var o=t[s][1][e];return i(o?o:e)},v,v.exports,e,t,o,n)}return o[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t){t.exports=function(t){var o=".bespoke-overview.bespoke-parent{pointer-events:auto}\n.bespoke-overview :not(img){pointer-events:none}\n.bespoke-overview .bespoke-slide{opacity:1;visibility:visible;cursor:pointer;pointer-events:auto}\n.bespoke-overview .bespoke-active{outline:0.4vw solid #cfd8dc;outline-offset:-0.2vw;-moz-outline-radius:0.2vw}\n.bespoke-overview .bespoke-bullet{opacity:1}\n.bespoke-overview-counter{counter-reset:overview}\n.bespoke-overview-counter .bespoke-slide::after{counter-increment:overview;content:counter(overview);position:absolute;right:0.75em;bottom:0.5em;font-size:1.25rem;line-height:1.25}\n.bespoke-title{visibility:hidden;position:absolute;top:0;left:0;width:100vw;padding:10px 0 0 0;line-height:1.2;font-weight:bold;text-align:center}\n.bespoke-overview:not(.bespoke-overview-to) .bespoke-title{visibility:visible;pointer-events:auto}\n/* z-index only works when slides are siblings */\n.bespoke-overview-to .bespoke-active,.bespoke-overview-from .bespoke-active{z-index:1}\n";return e("insert-css")(o,{prepend:!0}),function(e){t="object"==typeof t?t:{};var o,n={o:79,enter:13,esc:27},i=/, */,r=/^translate\((-?[\d.]+)px, *(-?[\d.]+)px\) scale\(([\d.]+)\)$/,s=["webkit","Moz","ms"],l="number"==typeof t.columns?parseInt(t.columns):3,a="number"==typeof t.margin?parseFloat(t.margin):10,v=!1,d=function(e,t){if(t in e.style)return t;for(var o=t.charAt(0).toUpperCase()+t.substr(1),n=0,i=s.length;i>n;n++){var r=s[n]+o;if(r in e.style)return r}return t},c=function(e){return e.getBoundingClientRect().width/e.offsetWidth},p=function(e){if("zoom"in e.style){var t=e.style.zoom;if(t.length>0)return parseFloat(t)}},f=function(e){var t=getComputedStyle(e),o=t[d(e,"transitionProperty")];if(!o||"none"===o)return[];o=o.split(i);for(var n=t[d(e,"transitionDuration")].split(i),r=t[d(e,"transitionDelay")].split(i),s=[],l=0,a=o.length;a>l;l++)("0s"!==n[l]||"0s"!==r[l])&&s.push(o[l]);return s},u=function(e){e.offsetHeight};onSlideClick=function(){closeOverview(e.slides.indexOf(this))},onNavigate=function(t,o){if(v){var n=o.index+t;return n>-1&&n<e.slides.length&&e.slide(n),!1}},onActivate=function(e){return"stopPropagation"in e?!e.stopPropagation:v?(scrollSlideIntoView(e),!1):void 0},scrollSlideIntoView=function(t){void 0===t&&(t={index:e.slide(),slide:e.slides[e.slide()]}),t.index<l?e.parent.scrollTop=0:t.slide.scrollIntoView(!0)},getOrCreateTitle=function(e){var t=e.firstElementChild;if(!t.classList.contains("bespoke-title")){var o=document.createElement("header");o.className="bespoke-title",o.appendChild(document.createTextNode(e.getAttribute("data-title")||document.title)),t=e.insertBefore(o,t)}return t},openOverview=function(){var n,i=e.slides,r=e.parent,s=r.classList,w=i.length-1,m=e.slide(),b=m>0?i[0]:i[w],g=d(b,"transform"),h=r.querySelector(".bespoke-scale-parent"),y=0,k=1,x=0,E=!v;h?k=c(h):(n=p(b))&&(k=n),void 0!==o&&(i[0].removeEventListener("transitionend",o,!1),w>0&&i[w].removeEventListener("transitionend",o,!1),s.remove("bespoke-overview-from")),t.title&&(y=getOrCreateTitle(r).offsetHeight),E&&(e.slide(m,{stopPropagation:!0}),s.add("bespoke-overview"),v=!0,t.numbers&&s.add("bespoke-overview-counter"),s.add("bespoke-overview-to"),x=w>0?f(b).length:f(b).indexOf("transform")>=0?1:0,r.style.overflowY="scroll",r.style.scrollBehavior="smooth");var O=a/k,L=r.clientWidth/k,C=r.clientHeight/k,T=r.offsetWidth-r.clientWidth,B=O*(l+1),S=b.offsetWidth,z=b.offsetHeight,K=(L-S)/2,A=(C-z)/2,I=(L-B)/l/S,N=O/I,q=S+N,H=z+N,V=y*k*I,W=n?0:T*I,P=0,F=0;if(K+=(S-S*I)/2,A+=(z-z*I)/2,i.forEach(function(e){var t=O-K-W+F*q*I,o=O-A+P*H*I+V;-1!==t.toString().indexOf("e-")&&(t=0),-1!==o.toString().indexOf("e-")&&(o=0),e.style[g]="translate("+t+"px, "+o+"px) scale("+I+")",e.style.marginBottom=P*l+F===w?N+"px":"0%",e.addEventListener("click",onSlideClick,!1),F===l-1?(P+=1,F=0):F+=1}),E)if(x>0){var Y=x;b.addEventListener("transitionend",o=function(e){e.target===this&&0===(Y-=1)&&(this.removeEventListener("transitionend",o,!1),o=void 0,s.remove("bespoke-overview-to"),m>=l&&i[m].scrollIntoView(!0),"webkitAppearance"in r.style&&r.scrollHeight>r.offsetHeight&&(r.style.overflowY="auto",u(r),r.style.overflowY="scroll"))},!1)}else i.forEach(u),s.remove("bespoke-overview-to"),m>=l&&i[m].scrollIntoView(!0);else m>=l&&i[m].scrollIntoView(!0)},closeOverview=function(n){e.slide("number"==typeof n?n:e.slide(),{stopPropagation:!1});var i,s=e.slides,l=e.parent,a=l.classList,w=l.scrollTop,m=s.length-1,b=e.slide()>0?s[0]:s[m],g=d(b,"transform"),h=d(b,"transition"),y=l.querySelector(".bespoke-scale-parent");y?i=c(y):void 0===(i=p(b))&&(i=1),void 0!==o&&(s[0].removeEventListener("transitionend",o,!1),m>0&&s[m].removeEventListener("transitionend",o,!1),a.remove("bespoke-overview-to")),l.style.scrollBehavior="",l.style.overflowY="";var k=w/i,x="WebkitAppearance"in l.style?void 0:0;if(s.forEach(function(e){if(void 0===x?(x=e.getBoundingClientRect().left,e.style.marginBottom="",x=e.getBoundingClientRect().left-x):e.style.marginBottom="",0!==k||0!==x){var t=e.style[g].match(r);t&&(e.style[g]="translate("+(parseFloat(t[1])-x)+"px, "+(parseFloat(t[2])-k)+"px) scale("+t[3]+")",e.style[h]="none",u(e),e.style[h]="")}e.removeEventListener("click",onSlideClick,!1)}),0!==w&&(l.scrollTop=0),a.remove("bespoke-overview"),v=!1,t.numbers&&a.remove("bespoke-overview-counter"),a.add("bespoke-overview-from"),numTransitions=m>0?f(b).length:f(b).indexOf("transform")>=0?1:0,s.forEach(function(e){e.style[g]=""}),numTransitions>0){var E=numTransitions;b.addEventListener("transitionend",o=function(e){e.target===this&&0===(E-=1)&&(this.removeEventListener("transitionend",o,!1),o=void 0,a.remove("bespoke-overview-from"))},!1)}else s.forEach(u),a.remove("bespoke-overview-from")},toggleOverview=function(){return v?closeOverview():openOverview()},resizeOverview=function(){v&&openOverview()},onKeydown=function(e){switch(e.which){case n.o:case n.esc:e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||toggleOverview();break;case n.enter:!v||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||closeOverview()}},window.addEventListener("load",function w(){window.removeEventListener("load",w,!1),e.parent.scrollTop>0&&(e.parent.scrollTop=0)},!1),window.addEventListener("resize",resizeOverview,!1),document.addEventListener("keydown",onKeydown,!1),e.on("activate",onActivate),e.on("next",onNavigate.bind(null,1)),e.on("prev",onNavigate.bind(null,-1)),t.autostart&&openOverview()}}},{"insert-css":2}],2:[function(e,t){var o={};t.exports=function(e,t){if(!o[e]){o[e]=!0;var n=document.createElement("style");n.setAttribute("type","text/css"),"textContent"in n?n.textContent=e:n.styleSheet.cssText=e;var i=document.getElementsByTagName("head")[0];t&&t.prepend?i.insertBefore(n,i.childNodes[0]):i.appendChild(n)}}},{}]},{},[1])(1)});