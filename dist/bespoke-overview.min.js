/*! bespoke-overview v1.0.0 Â© 2015 Dan Allen, MIT License */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self);var n=t;n=n.bespoke||(n.bespoke={}),n=n.plugins||(n.plugins={}),n.overview=e()}}(function(){return function e(t,n,o){function r(s,l){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!l&&a)return a(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return r(n?n:e)},c,c.exports,e,t,n,o)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(e,t){t.exports=function(t){var n=".bespoke-overview.bespoke-parent{pointer-events:auto}\n.bespoke-overview :not(img){pointer-events:none}\n.bespoke-overview .bespoke-slide{opacity:1;visibility:visible;cursor:pointer;pointer-events:auto}\n.bespoke-overview .bespoke-slide[aria-selected]{outline:0.4vw solid #cfd8dc;outline-offset:-0.2vw;-moz-outline-radius:0.2vw}\n.bespoke-overview .bespoke-bullet {opacity:1}\n.bespoke-overview .bespoke-overflow{position:absolute;top:100%;left:0;height:0.5px;width:100%}\n.bespoke-overview-counter{counter-reset:overview-slide}\n.bespoke-overview-counter .bespoke-slide::after{counter-increment:overview-slide;content:counter(overview-slide);position:absolute;right:0.75em;bottom:0.5em;font-size:1.25rem;line-height:1.25}\n/* TODO change the following rule to .bespoke-transition .bespoke-active once the class is enabled */\n.bespoke-active{z-index:1}";return e("insert-css")(n,{prepend:!0}),function(e){t="object"==typeof t?t:{};var n={o:79,enter:13,esc:27},o=["Webkit","Moz","ms"],r="bespoke-overview",i="bespoke-overview-counter",s=0,l=!1,a="undefined"!=typeof t.cols?parseInt(t.cols):3,c="undefined"!=typeof t.margin?parseFloat(t.margin):10,f=function(e){if("transform"in e.style)return"transform";for(var t=0,n=o.length;n>t;t++){var r=o[t]+"Transform";if(r in e.style)return r}return"transform"},u=function(e){return e.getBoundingClientRect().width/e.offsetWidth},d=function(e){if("zoom"in e.style){var t=e.style.zoom;if(t.length>0)return parseFloat(t)}},p=function(e){return"0s"!==getComputedStyle(e).transitionDuration},v=function(t){var n=e.slides.indexOf(t.currentTarget);-1!==n&&h(n)},m=function(){return l},y=function(t){if(m()){if(-1===t&&0===s||1===t&&s+1===e.slides.length)return!1;var n=e.slides[s];return n.removeAttribute("aria-selected"),n=e.slides[s+=t],e.slide(s),n.setAttribute("aria-selected",!0),a>s?e.parent.scrollTop>0&&(e.parent.scrollTo?e.parent.scrollTo(0,0):e.parent.scrollTop=0):n.scrollIntoView(!0),!1}return!0},b=function(t){"transform"===t.propertyName&&(e.slides[s].scrollIntoView(!0),this.removeEventListener("transitionend",b,!1))},w=function(){var n,o=e.parent,m=e.slides[e.slides.length-1],y=e.slides[s=e.slide()],w=o.querySelector(".bespoke-scale-parent"),h=!1;w?n=u(w):(n=d(m))?h=!0:n=1,o.classList.add(r),t.counter&&o.classList.add(i),o.style.overflowY="scroll",o.style.scrollBehavior="smooth";var g=c/n,k=o.clientWidth/n,x=o.clientHeight/n,E=(o.offsetWidth/n-k)/n,L=g*(a+1),T=m.offsetWidth,B=m.offsetHeight,K=(k-L)/a/T,C=h?1:n,q=.5*(k-T)+E*C,z=.5*(x-B),q=q+.5*(T-T*K),z=z+.5*(B-B*K),S=g/K,A=T+S,O=B+S,W=0,I=0;e.slides.forEach(function(e){var t=g+E-q+I*A*K,n=g-z+W*O*K;-1!==t.toString().indexOf("e-")&&(t=0),-1!==n.toString().indexOf("e-")&&(n=0),e.style[f(e)]="translate("+t+"px, "+n+"px) scale("+K+")",e.style.marginBottom="0%",I===a-1?(I=0,W+=1):I+=1}),m.style.marginBottom=S+"px",e.slides.forEach(function(e){e.addEventListener("click",v,!1)}),s>=a&&(p(m)?m.addEventListener("transitionend",b,!1):y.scrollIntoView(!0)),y.setAttribute("aria-selected",!0),l=!0},h=function(n){"number"==typeof n&&n!==s&&e.slide(n);var o=e.parent,a=o.querySelector(".bespoke-overflow");a&&o.removeChild(a),o.style.scrollBehavior="",o.style.overflowY="",o.scrollTop=0,e.slides.forEach(function(e){e.style[f(e)]="",e.style.marginBottom="",e.removeEventListener("click",v,!1)}),o.classList.remove(r),t.counter&&o.classList.remove(i),e.slides[s].removeAttribute("aria-selected"),l=!1},g=function(){return m()?h():w()},k=function(e){switch(e.which){case n.o:case n.esc:e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||g();break;case n.enter:!m()||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||h()}},x=function(){window.removeEventListener("load",x,!1),e.parent.scrollTop=0};window.addEventListener("load",x,!1),document.addEventListener("keydown",k,!1),e.on("next",y.bind(null,1)),e.on("prev",y.bind(null,-1)),t.start&&w()}}},{"insert-css":2}],2:[function(e,t){var n={};t.exports=function(e,t){if(!n[e]){n[e]=!0;var o=document.createElement("style");o.setAttribute("type","text/css"),"textContent"in o?o.textContent=e:o.styleSheet.cssText=e;var r=document.getElementsByTagName("head")[0];t&&t.prepend?r.insertBefore(o,r.childNodes[0]):r.appendChild(o)}}},{}]},{},[1])(1)});