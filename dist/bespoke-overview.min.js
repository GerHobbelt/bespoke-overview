/*! bespoke-overview v1.0.3-dev Â© 2015 Dan Allen, MIT License */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t=t.bespoke||(t.bespoke={}),t=t.plugins||(t.plugins={}),t.overview=e()}}(function(){return function e(t,o,n){function i(s,l){if(!o[s]){if(!t[s]){var a="function"==typeof require&&require;if(!l&&a)return a(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=o[s]={exports:{}};t[s][0].call(f.exports,function(e){var o=t[s][1][e];return i(o?o:e)},f,f.exports,e,t,o,n)}return o[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,o){t.exports=function(t){return e("insert-css")(".bespoke-parent.bespoke-overview{pointer-events:auto}.bespoke-overview :not(img){pointer-events:none}.bespoke-overview .bespoke-slide{opacity:1;visibility:visible;cursor:pointer;pointer-events:auto}.bespoke-overview .bespoke-active{outline:6px solid #cfd8dc;outline-offset:-3px;-moz-outline-radius:3px}.bespoke-overview .bespoke-bullet{opacity:1;visibility:visible}.bespoke-overview-counter{counter-reset:overview}.bespoke-overview-counter .bespoke-slide::after{counter-increment:overview;content:counter(overview);position:absolute;right:.75em;bottom:.5em;font-size:1.25rem;line-height:1.25}.bespoke-title{visibility:hidden;position:absolute;top:0;left:0;width:100%;pointer-events:auto}.bespoke-title h1{margin:0;font-size:1.6em;line-height:1.2;text-align:center}.bespoke-overview:not(.bespoke-overview-to) .bespoke-title{visibility:visible}.bespoke-overview-to .bespoke-active,.bespoke-overview-from .bespoke-active{z-index:1}",{prepend:!0}),function(e){t="object"==typeof t?t:{};var o,n={o:79,enter:13,up:38,down:40},i={csv:/, */,none:/^none(?:, ?none)*$/,transform:/^translate\((.+?)px, ?(.+?)px\) scale\((.+?)\)$/},r=!("transition"in document.body.style)&&"webkitTransition"in document.body.style?"webkitTransitionEnd":"transitionend",s=["webkit","Moz","ms"],l="number"==typeof t.columns?parseInt(t.columns):3,a="number"==typeof t.margin?parseFloat(t.margin):15,c=!1,f=!1,p=function(e,t){if(!(t in e.style))for(var o=t.charAt(0).toUpperCase()+t.substr(1),n=0,i=s.length;i>n;n++)if(s[n]+o in e.style)return s[n]+o;return t},d=function(e,t){return parseFloat(e.style[t].slice(6,-1))},v=function(e){return"zoom"in e.style?parseFloat(e.style.zoom)||void 0:void 0},u=function(e){var t=[],o=getComputedStyle(e),n=o[p(e,"transitionProperty")];if(!n||i.none.test(n))return t;n=n.split(i.csv);var r=o[p(e,"transitionDuration")].split(i.csv),s=o[p(e,"transitionDelay")].split(i.csv);return n.forEach(function(e,o){("0s"!==r[o]||"0s"!==s[o])&&t.push(e)}),t},m=function(e,t,o,n){t&&(e.style[t]=o),e.offsetHeight,t&&(e.style[t]=n)},h=function(){E(e.slides.indexOf(this))},b=function(t,o){if(c){var n=o.index+t;return n>-1&&n<e.slides.length&&e.slide(n,{preview:!0}),!1}},y=function(o){return f?void(c&&o.scrollIntoView!==!1&&w(o.slide,o.index,v(o.slide))):(f=!0,e.parent.scrollLeft=e.parent.scrollTop=0,void(t.autostart&&setTimeout(x,100)))},w=function(t,o,n){e.parent.scrollTop=l>o?0:e.parent.scrollTop+t.getBoundingClientRect().top*(n||1)},k=function(e,t,n,i){n.removeEventListener(r,o,!1),i&&i!==n&&i.removeEventListener(r,o,!1),o=void 0,t.remove("bespoke-overview-"+e)},g=function(e){var t=e.firstElementChild;if(t.classList.contains("bespoke-title"))return t.style.width="",t;var o=document.createElement("header");o.className="bespoke-title",o.style[p(o,"transformOrigin")]="0 0";var n=document.createElement("h1");return n.appendChild(document.createTextNode(e.getAttribute("data-title")||document.title)),o.appendChild(n),m(e.insertBefore(o,t)),o},x=function(){var n,i,s=e.slides,f=e.parent,b=f.classList,y=s.length-1,x=e.slide(),E=x>0?s[0]:s[y],L=p(E,"transform"),T=f.querySelector(".bespoke-scale-parent"),z=1,C=0,B=c,O="webkitAppearance"in f.style;T?z=d(T,L):(n=v(E))&&(z=n),o&&k("from",b,s[0],s[y]),t.title&&(i=g(f)),B||(e.slide(x,{preview:!0}),b.add("bespoke-overview"),c=!0,t.counter&&b.add("bespoke-overview-counter"),b.add("bespoke-overview-to"),C=y>0?u(E).length:u(E).indexOf("transform")>=0?1:0,f.style.overflowY="scroll",f.style.scrollBehavior="smooth",O&&s.forEach(function(e){m(e,"marginBottom","0%","")}));var K=f.clientWidth/z,W=f.clientHeight/z,H=(T||f).offsetWidth-f.clientWidth,q=T?H/2/z:0,F=E.offsetWidth,N=E.offsetHeight,S=K/(l*F+(l+1)*a),A=z*S,D=F*S,I=N*S,U=(K-D)/2,Y=(W-I)/2,j=a*S,M=0,V=0,$=0;i&&(t.scaleTitle!==!1?(i.style[n?"zoom":L]=n?A:"scale("+A+")",i.style.width=f.clientWidth/A+"px",M=i.offsetHeight*S):(H>0&&(i.style.width=f.clientWidth+"px"),M=i.offsetHeight/z)),s.forEach(function(e){var t=$*D+($+1)*j-q-U,o=V*I+(V+1)*j+M-Y;e.style[L]="translate("+(t.toString().indexOf("e-")>=0?0:t)+"px, "+(o.toString().indexOf("e-")>=0?0:o)+"px) scale("+S+")",V*l+$===y&&(e.style.marginBottom=a+"px"),e.addEventListener("click",h,!1),$===l-1?(V+=1,$=0):$+=1}),B?w(s[x],x,n):C>0?E.addEventListener(r,o=function(e){e.target===this&&0===(C-=1)&&(k("to",b,this),O&&f.scrollHeight>f.clientHeight&&m(f,"overflowY","auto","scroll"),w(s[x],x,n))},!1):(s.forEach(function(e){m(e)}),b.remove("bespoke-overview-to"),w(s[x],x,n))},E=function(n){e.slide("number"==typeof n?n:e.slide(),{scrollIntoView:!1});var s,l=e.slides,a=e.parent,f=a.classList,b=l.length-1,y=e.slide()>0?l[0]:l[b],w=p(y,"transform"),g=p(y,"transition"),x=a.querySelector(".bespoke-scale-parent"),E="webkitAppearance"in a.style;x?s=d(x,w):(s=v(y))||(s=1),o&&k("to",f,l[0],l[b]);var L=a.scrollTop/s,T=(a.offsetWidth-(x||a).clientWidth)/2/s;a.style.scrollBehavior=a.style.overflowY="",l.forEach(function(e){E&&m(e,"marginBottom","0%",""),e.removeEventListener("click",h,!1)}),(L||T)&&l.forEach(function(e){var t=e.style[w].match(i.transform);e.style[w]="translate("+(parseFloat(t[1])-T)+"px, "+(parseFloat(t[2])-L)+"px) scale("+t[3]+")",m(e,g,"none","")}),a.scrollTop=0,f.remove("bespoke-overview"),c=!1,t.counter&&f.remove("bespoke-overview-counter"),f.add("bespoke-overview-from");var z=b>0?u(y).length:u(y).indexOf("transform")>=0?1:0;l.forEach(function(e){e.style[w]=""}),z>0?y.addEventListener(r,o=function(e){e.target===this&&0===(z-=1)&&k("from",f,this)},!1):(l.forEach(function(e){m(e)}),f.remove("bespoke-overview-from"))},L=function(){c?E():x()},T=function(){c&&x()},z=function(t){if(t.which===n.o)t.altKey||t.ctrlKey||t.metaKey||t.shiftKey||L();else if(c)switch(t.which){case n.enter:t.altKey||t.ctrlKey||t.metaKey||t.shiftKey||E();break;case n.up:return b(-l,{index:e.slide()});case n.down:return b(l,{index:e.slide()})}};e.on("activate",y),e.on("next",b.bind(null,1)),e.on("prev",b.bind(null,-1)),e.on("destroy",function(){removeEventListener("resize",T,!1),document.removeEventListener("keydown",z,!1)}),addEventListener("resize",T,!1),document.addEventListener("keydown",z,!1)}}},{"insert-css":2}],2:[function(e,t,o){var n={};t.exports=function(e,t){if(!n[e]){n[e]=!0;var o=document.createElement("style");o.setAttribute("type","text/css"),"textContent"in o?o.textContent=e:o.styleSheet.cssText=e;var i=document.getElementsByTagName("head")[0];t&&t.prepend?i.insertBefore(o,i.childNodes[0]):i.appendChild(o)}}},{}]},{},[1])(1)});